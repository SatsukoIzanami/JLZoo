import"./site-nav-k-8yBipB.js";class m extends HTMLElement{constructor(){super();const e=document.createElement("form");e.className="contact-form",e.method="post",e.action="javascript:void(0)";const t=this._createField("Name *","name","input",{type:"text",required:"",minlength:"3",placeholder:"Enter your full name"}),s=this._createField("Email *","email","input",{type:"email",required:"",placeholder:"your.email@example.com"}),i=this._createField("Subject *","subject","input",{type:"text",required:"",minlength:"5",placeholder:"What is your message about?"}),a=this._createField("Message *","message","textarea",{required:"",rows:"6",placeholder:"Please enter at least 5 words"}),n=document.createElement("button");n.type="submit",n.className="btn primary",n.textContent="Send Message";const r=document.createElement("p");r.className="form-message",e.append(t,s,i,a,n,r),this.appendChild(e),this.form=e,this.formMessage=r,this._attachValidation()}connectedCallback(){this._wireEvents()}_createField(e,t,s="input",i={}){const a=document.createElement("div");a.className="field";const n=document.createElement("label");n.setAttribute("for",t),n.textContent=e;const r=document.createElement(s);r.name=t,r.id=t,Object.entries(i).forEach(([l,c])=>r.setAttribute(l,c));const o=document.createElement("div");return o.className="field-error",o.id=`${t}-error`,o.setAttribute("aria-live","polite"),r.setAttribute("aria-describedby",o.id),a.append(n,r,o),a}_getField(e){const t=this.form.querySelector(`[name="${e}"]`),s=t?.closest(".field"),i=s?.querySelector(".field-error");return{wrap:s,control:t,error:i}}_setError(e,t){const{wrap:s,control:i,error:a}=this._getField(e);s&&(t?(s.classList.add("is-invalid"),i?.setAttribute("aria-invalid","true"),a&&(a.textContent=t)):(s.classList.remove("is-invalid"),i?.removeAttribute("aria-invalid"),a&&(a.textContent="")))}_hasRepeatingChars(e){return/(.)\1{2,}/.test(e)}_validateName(){const{control:e}=this._getField("name");if(!e)return!0;e.value=e.value.trim();const t=e.validity;let s="";return t.valueMissing?s="Name is required.":t.tooShort?s="Name must be at least 3 characters.":this._hasRepeatingChars(e.value)&&(s="Name cannot contain repeating characters."),this._setError("name",s),!s}_validateEmail(){const{control:e}=this._getField("email");if(!e)return!0;e.value=e.value.trim();const t=e.validity;let s="";return t.valueMissing?s="Email is required.":t.typeMismatch&&(s="Please enter a valid email address."),this._setError("email",s),!s}_validateSubject(){const{control:e}=this._getField("subject");if(!e)return!0;e.value=e.value.trim();const t=e.validity;let s="";return t.valueMissing?s="Subject is required.":t.tooShort?s="Subject must be at least 5 characters.":this._hasRepeatingChars(e.value)&&(s="Subject cannot contain repeating characters."),this._setError("subject",s),!s}_validateMessage(){const{control:e}=this._getField("message");if(!e)return!0;e.value=e.value.trim();const t=e.validity;let s="";return t.valueMissing?s="Message is required.":t.tooShort&&e.value.split(/\s+/).filter(a=>a.length>0).length<5&&(s="Message must contain at least 5 words."),this._setError("message",s),!s}_validateForm(){const e=this._validateName(),t=this._validateEmail(),s=this._validateSubject(),i=this._validateMessage(),a=e&&t&&s&&i;if(!a){const n=["name","email","subject","message"];for(const r of n){const{control:o}=this._getField(r);o&&o.hasAttribute("aria-invalid")&&o.focus()}}return a}_attachValidation(){this.form.querySelectorAll("input, textarea").forEach(t=>{t.addEventListener("blur",()=>{t.name==="name"?this._validateName():t.name==="email"?this._validateEmail():t.name==="subject"?this._validateSubject():t.name==="message"&&this._validateMessage()}),t.addEventListener("input",()=>{t.checkValidity()&&(t.name==="message"?t.value.trim().split(/\s+/).filter(i=>i.length>0).length>=5&&this._setError(t.name,""):this._setError(t.name,""))})})}_wireEvents(){this.form.addEventListener("submit",async e=>{e.preventDefault(),e.stopPropagation(),this._validateForm()&&(this.formMessage.className="form-message success",this.formMessage.textContent="Thank you! Your message has been sent. We will get back to you soon.",this.form.reset(),["name","email","subject","message"].forEach(t=>this._setError(t,"")),setTimeout(()=>{this.formMessage.textContent="",this.formMessage.className="form-message"},5e3))})}}customElements.define("contact-form",m);
